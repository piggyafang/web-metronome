# 不囉唆的節拍器 3.0 增強版

![Node.js](https://img.shields.io/badge/Node.js-Web%20Audio%20API-green)
![License](https://img.shields.io/badge/license-MIT-blue)
![Status](https://img.shields.io/badge/status-Active-brightgreen)

基於 [NiceChord 好和弦](https://nicechord.com/) 原版節拍器的增強版本，新增多項專業功能，適合音樂學習者和專業音樂人使用。

## ✨ 核心功能

### 🎵 多小節拍子支援
- **拍數設定**：支援 1-16 拍的自定義小節長度
- **動態範圍**：輸入範圍會根據拍數自動調整
- **多拍循環**：完整的多拍節奏循環播放

### 🎹 樂句節拍系統
- **智慧音效**：整數位置使用主拍音效（C5），小數位置使用副拍音效（G4）
- **支援零位置**：可以將 0 作為有效的樂句節拍位置
- **靈活組合**：支援任意組合，如 `0, 0.5, 1, 1.5`

### 🎚️ 音效控制
- **主拍開關**：可獨立控制主拍音效的開啟/關閉
- **音量分層**：主拍音量 0.25，副拍音量 0.15
- **音色區分**：主拍 C5 (523.25Hz)，副拍 G4 (392Hz)

### 📊 樂譜視覺化
- **即時預覽**：輸入設定後立即顯示對應的樂譜
- **視覺區分**：
  - ⚫ 主拍：黑色實心圓點（有音效）/ 灰色空心圓點（無音效）
  - ⚫ 樂句節拍（整數）：深色大圓點（7px）
  - ⚫ 樂句節拍（小數）：灰色小圓點（5px）
- **完整圖例**：清楚標示各種音符類型

### ⚡ 快速設定
預設常用節拍模式：
- **基本節拍**：八分、十六分
- **複雜節奏**：三連音、五連音、六連音、七連音
- **Swing 節奏**：66% Swing、有點 Swing
- **複合節拍**：附點、二對三

## 🚀 技術特點

### 音頻技術
- **Web Audio API**：使用瀏覽器原生音頻 API
- **精準排程**：25ms lookahead 確保時序準確
- **方波合成**：使用方波振盪器產生清晰音效
- **ADSR 包絡**：動態音量控制提供自然音效

### 架構設計
- **單頁應用**：純前端實現，無需服務器
- **響應式**：支援桌面和行動裝置
- **即時更新**：所有設定變更立即生效

## 📖 使用方法

### 基本操作
1. **設定 BPM**：輸入 1-999 的節拍速度
2. **選擇拍數**：設定小節長度（1-16 拍）
3. **配置樂句節拍**：輸入 0 到拍數範圍內的數字
4. **控制音效**：勾選或取消主拍音效
5. **開始播放**：點擊「開始」按鈕

### 樂句節拍範例

#### 範例 1：基本四分音符
```
拍數：4
樂句節拍：1, 2, 3
結果：第 1、2、3 拍有主拍音效
```

#### 範例 2：八分音符
```
拍數：2
樂句節拍：0.5, 1.5
結果：第 0.5、1.5 拍有副拍音效
```

#### 範例 3：混合節奏
```
拍數：4
樂句節拍：0, 0.5, 1, 2.5, 3
結果：0, 1, 3 拍用主拍音效，0.5, 2.5 拍用副拍音效
```

#### 範例 4：Swing 節奏
```
拍數：2
樂句節拍：0.666, 1.666
結果：66% Swing 節奏模式
```

## 🎯 適用場景

### 音樂學習
- **節奏練習**：訓練複雜節拍感
- **視覺輔助**：樂譜預覽幫助理解
- **分段練習**：可只播放特定拍點

### 專業演奏
- **編曲輔助**：測試複雜節奏模式
- **錄音準備**：建立準確的節拍基準
- **現場演出**：靈活的節拍器配置

### 教學用途
- **節拍教學**：視覺化展示節拍結構
- **練習指導**：自定義練習節奏
- **理論說明**：圖形化節拍概念

## 🌐 技術需求

### 瀏覽器支援
- Chrome 66+
- Firefox 60+
- Safari 11.1+
- Edge 79+

### 系統需求
- 支援 Web Audio API
- JavaScript ES6+
- HTML5 Canvas

## 🚦 快速開始

### 線上使用
直接開啟 `index.html` 檔案即可使用

### 本地伺服器
```bash
# 使用 Python 3
python3 -m http.server 8000

# 使用 Node.js
npx serve .

# 然後開啟 http://localhost:8000
```

## 📁 專案結構

```
web-metronome/
├── index.html          # 主要應用程式檔案
├── CLAUDE.md           # 開發技術文件
├── Requirements.md     # 功能需求文件
└── README.md          # 專案說明文件
```

## 🔧 開發資訊

### 版本歷史
- **v3.0**: 樂句節拍功能、智慧音效選擇
- **v2.0**: 多拍支援、樂譜視覺化、主拍開關
- **v1.0**: 基於 NiceChord 原版的增強版

### 技術架構
- **前端**: 純 HTML5 + CSS3 + JavaScript ES6
- **音頻**: Web Audio API + 方波合成
- **視覺化**: HTML5 Canvas + 2D 渲染

## 🤝 貢獻指南

歡迎提交 Issue 和 Pull Request！

### 開發設置
1. Fork 本專案
2. 創建功能分支：`git checkout -b feature/new-feature`
3. 提交變更：`git commit -m 'Add new feature'`
4. 推送分支：`git push origin feature/new-feature`
5. 提交 Pull Request

## 📄 授權條款

本專案基於 MIT 授權條款開源

## 🙏 致謝

- 感謝 [NiceChord 好和弦](https://nicechord.com/) 提供原版節拍器基礎
- 使用 Web Audio API 實現高品質音頻合成
- 採用 HTML5 Canvas 提供流暢的視覺化體驗

---

**Made with ❤️ for musicians by musicians**